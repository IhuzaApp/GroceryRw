query getAllwallets {
  Wallets {
    shopper_id
    reserved_balance
    last_updated
    id
    available_balance
    User {
      created_at
      email
      gender
      id
      is_active
      name
      password_hash
      phone
      profile_picture
      role
      updated_at
    }
    Wallet_Transactions {
      amount
      created_at
      id
      related_order_id
      status
      type
      wallet_id
    }
  }
}

query getShopperWallet($shopper_id: uuid!) {
  Wallets(where: { shopper_id: { _eq: $shopper_id } }) {
    id
    shopper_id
    available_balance
    reserved_balance
    last_updated
  }
}

mutation createWallet($shopper_id: uuid!) {
  insert_Wallets_one(
    object: {
      shopper_id: $shopper_id
      available_balance: "0"
      reserved_balance: "0"
    }
  ) {
    id
    shopper_id
    available_balance
    reserved_balance
    last_updated
  }
}

mutation updateWalletBalances(
  $wallet_id: uuid!
  $available_balance: String!
  $reserved_balance: String!
) {
  update_Wallets_by_pk(
    pk_columns: { id: $wallet_id }
    _set: {
      available_balance: $available_balance
      reserved_balance: $reserved_balance
      last_updated: "now()"
    }
  ) {
    id
    available_balance
    reserved_balance
    last_updated
  }
}
